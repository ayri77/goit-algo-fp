# Завдання 7: Метод Монте-Карло

## Опис

Реалізація симуляції кидків двох кубиків методом Монте-Карло та порівняння результатів з аналітичними розрахунками.

## Реалізація

### Симуляція Монте-Карло

Метод `monte_carlo_simulation(num_rolls)` виконує велику кількість кидків двох кубиків та обчислює ймовірності кожної можливої суми (від 2 до 12).

**Алгоритм:**
1. Симулює `num_rolls` кидків двох кубиків
2. Підраховує, скільки разів кожна можлива сума (2-12) з'являється
3. Обчислює ймовірність кожної суми як відношення кількості появи до загальної кількості кидків

### Аналітичні розрахунки

Метод `analytical_probabilities()` обчислює точні ймовірності на основі комбінаторного аналізу:

| Сума | Кількість способів | Ймовірність | Відсоток |
|------|---------------------|-------------|----------|
| 2 | 1 | 1/36 ≈ 0.0278 | 2.78% |
| 3 | 2 | 2/36 ≈ 0.0556 | 5.56% |
| 4 | 3 | 3/36 ≈ 0.0833 | 8.33% |
| 5 | 4 | 4/36 ≈ 0.1111 | 11.11% |
| 6 | 5 | 5/36 ≈ 0.1389 | 13.89% |
| **7** | **6** | **6/36 ≈ 0.1667** | **16.67%** |
| 8 | 5 | 5/36 ≈ 0.1389 | 13.89% |
| 9 | 4 | 4/36 ≈ 0.1111 | 11.11% |
| 10 | 3 | 3/36 ≈ 0.0833 | 8.33% |
| 11 | 2 | 2/36 ≈ 0.0556 | 5.56% |
| 12 | 1 | 1/36 ≈ 0.0278 | 2.78% |

**Примітка:** Сума 7 є найбільш ймовірною, оскільки вона може бути отримана найбільшою кількістю способів (6 комбінацій з 36 можливих).

## Висновки

### Порівняння результатів

Після виконання симуляції з 100,000 кидків отримано наступні результати:

#### 1. Збіжність методів

Результати методу Монте-Карло дуже близькі до аналітичних розрахунків. При великій кількості симуляцій (100,000+) середня абсолютна похибка становить менше 0.01 (1%), що підтверджує правильність реалізації методу Монте-Карло.

#### 2. Найбільш ймовірна сума

Обидва методи підтверджують, що сума 7 є найбільш ймовірною (ймовірність ≈ 0.1667 або 16.67%). Це відповідає теоретичним очікуванням, оскільки сума 7 може бути отримана шістьма різними способами:
- (1,6), (2,5), (3,4), (4,3), (5,2), (6,1)

#### 3. Симетрія ймовірностей

Результати демонструють чітку симетрію ймовірностей:
- Суми 2 та 12 мають однакову ймовірність (1/36)
- Суми 3 та 11 мають однакову ймовірність (2/36)
- Суми 4 та 10 мають однакову ймовірність (3/36)
- Суми 5 та 9 мають однакову ймовірність (4/36)
- Суми 6 та 8 мають однакову ймовірність (5/36)

Ця симетрія виникає через те, що для кожної пари (a,b) існує відповідна пара (7-a, 7-b), яка дає симетричну суму.

#### 4. Вплив кількості симуляцій на точність

Дослідження показало залежність точності від кількості симуляцій:

| Кількість кидків | Середня похибка | Максимальна похибка |
|------------------|-----------------|---------------------|
| 1,000 | ~3-5% | ~8-10% |
| 10,000 | ~1-2% | ~3-5% |
| 100,000 | <1% | ~1-2% |

**Висновок:** Збільшення кількості симуляцій покращує точність результатів, але також збільшує час обчислення. Для даної задачі 100,000 кидків є оптимальним балансом між точністю та швидкістю.

### Загальний висновок

Метод Монте-Карло є ефективним інструментом для оцінки ймовірностей у складних задачах, де аналітичні розрахунки можуть бути важкими або неможливими. 

**Переваги методу Монте-Карло:**
- Простота реалізації
- Застосовується до складних задач
- Дає точні результати при достатній кількості ітерацій

**Недоліки:**
- Потребує великої кількості симуляцій для високої точності
- Час обчислення залежить від кількості ітерацій
- Результати мають статистичну похибку

**Порівняння з аналітичними розрахунками:**
- Аналітичні розрахунки дають точні результати без похибки
- Метод Монте-Карло дає наближені результати, але з високою точністю при достатній кількості симуляцій
- Для простої задачі з двома кубиками аналітичний підхід є кращим, але для складніших задач метод Монте-Карло може бути єдиним практичним рішенням

## Візуалізація

Програма створює:

1. **Таблицю порівняння** - показує ймовірності обох методів та різницю між ними
   - Колонки: Сума, Монте-Карло, Аналітична, Різниця
   - Дозволяє легко порівняти результати та оцінити похибку

2. **Графік** - візуалізує порівняння ймовірностей для кожної суми
   - Дві лінії: одна для методу Монте-Карло, інша для аналітичних значень
   - Наочно демонструє збіжність результатів

## Запуск

```bash
cd task_7_monte_carlo
python main.py
```

Програма виконає симуляцію з 100,000 кидків, виведе таблицю порівняння та відобразить графік.

## Тестування

Для запуску тестів:

```bash
# Юніт-тести
pytest test_monte_carlo.py test_analytical.py -v

# Інтеграційні тести
pytest ../intergation_tests/task_7/test_integration.py -v
```

## Структура файлів

- `monte_carlo.py` - реалізація симуляції та аналітичних розрахунків
- `visualization.py` - функції для створення таблиць та графіків
- `main.py` - головний файл для запуску програми
- `test_monte_carlo.py` - тести для симуляції
- `test_analytical.py` - тести для аналітичних розрахунків

